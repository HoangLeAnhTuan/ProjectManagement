@PostMapping("/project/register/confirm")
public String confirmRegister(
    @ModelAttribute("project") @Validated ProjectRegisterDTO projectDTO,
    BindingResult result,
    Model model
) {
    // Validate trùng ID
    if (projectService.existsByProjectId(projectDTO.getProjectId())) {
        result.rejectValue("projectId", null, "Project ID already exists");
    }

    if (result.hasErrors()) {
        model.addAttribute("departments", departmentService.findAll());
        return "project-register"; // Quay lại form cùng lỗi
    }

    Department dept = departmentService.findById(projectDTO.getProjectDept());
    String difficultyText = switch (projectDTO.getDifficulty()) {
        case "E" -> "Easy";
        case "M" -> "Medium";
        case "H" -> "Hard";
        default -> "Unknown";
    };

    model.addAttribute("department", dept);
    model.addAttribute("difficultyText", difficultyText);
    return "project-confirm";
}
